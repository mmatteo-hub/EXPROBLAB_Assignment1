<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Welcome to EXPROBLAB_Assignment1’s documentation! &mdash; EXPROBLAB_Assignment1 1.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="#" class="icon icon-home"> EXPROBLAB_Assignment1
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">Welcome to EXPROBLAB_Assignment1’s documentation!</a></li>
<li><a class="reference internal" href="#indices-and-tables">Indices and tables</a><ul>
<li><a class="reference internal" href="#exproblab-assignment1">EXPROBLAB_Assignment1</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-scripts.helper">Helper Module</a><ul>
<li><a class="reference internal" href="#scripts.helper.Helper"><code class="docutils literal notranslate"><span class="pre">Helper</span></code></a><ul>
<li><a class="reference internal" href="#scripts.helper.Helper._location_old_timestamp"><code class="docutils literal notranslate"><span class="pre">Helper._location_old_timestamp()</span></code></a></li>
<li><a class="reference internal" href="#scripts.helper.Helper._robot_pos"><code class="docutils literal notranslate"><span class="pre">Helper._robot_pos()</span></code></a></li>
<li><a class="reference internal" href="#scripts.helper.Helper._robot_timestamp_value"><code class="docutils literal notranslate"><span class="pre">Helper._robot_timestamp_value()</span></code></a></li>
<li><a class="reference internal" href="#scripts.helper.Helper._target_coordiantes"><code class="docutils literal notranslate"><span class="pre">Helper._target_coordiantes()</span></code></a></li>
<li><a class="reference internal" href="#scripts.helper.Helper.check_battery"><code class="docutils literal notranslate"><span class="pre">Helper.check_battery()</span></code></a></li>
<li><a class="reference internal" href="#scripts.helper.Helper.format"><code class="docutils literal notranslate"><span class="pre">Helper.format()</span></code></a></li>
<li><a class="reference internal" href="#scripts.helper.Helper.plan_location"><code class="docutils literal notranslate"><span class="pre">Helper.plan_location()</span></code></a></li>
<li><a class="reference internal" href="#scripts.helper.Helper.reason_changes"><code class="docutils literal notranslate"><span class="pre">Helper.reason_changes()</span></code></a></li>
<li><a class="reference internal" href="#scripts.helper.Helper.update_timestamp"><code class="docutils literal notranslate"><span class="pre">Helper.update_timestamp()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#module-scripts.init_state">InitState Module</a><ul>
<li><a class="reference internal" href="#scripts.init_state.InitState"><code class="docutils literal notranslate"><span class="pre">InitState</span></code></a><ul>
<li><a class="reference internal" href="#scripts.init_state.InitState._ontology_initialization"><code class="docutils literal notranslate"><span class="pre">InitState._ontology_initialization()</span></code></a></li>
<li><a class="reference internal" href="#scripts.init_state.InitState.execute"><code class="docutils literal notranslate"><span class="pre">InitState.execute()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#module-scripts.fsm">FSM Module</a><ul>
<li><a class="reference internal" href="#scripts.fsm.main"><code class="docutils literal notranslate"><span class="pre">main()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-scripts.reasoner">Reasoner Module</a><ul>
<li><a class="reference internal" href="#scripts.reasoner.Reasoner"><code class="docutils literal notranslate"><span class="pre">Reasoner</span></code></a><ul>
<li><a class="reference internal" href="#scripts.reasoner.Reasoner._check_accessible_location"><code class="docutils literal notranslate"><span class="pre">Reasoner._check_accessible_location()</span></code></a></li>
<li><a class="reference internal" href="#scripts.reasoner.Reasoner._check_for_corridors"><code class="docutils literal notranslate"><span class="pre">Reasoner._check_for_corridors()</span></code></a></li>
<li><a class="reference internal" href="#scripts.reasoner.Reasoner._check_for_recharging_room"><code class="docutils literal notranslate"><span class="pre">Reasoner._check_for_recharging_room()</span></code></a></li>
<li><a class="reference internal" href="#scripts.reasoner.Reasoner._check_for_urgent_locations"><code class="docutils literal notranslate"><span class="pre">Reasoner._check_for_urgent_locations()</span></code></a></li>
<li><a class="reference internal" href="#scripts.reasoner.Reasoner._check_recharge_location_available"><code class="docutils literal notranslate"><span class="pre">Reasoner._check_recharge_location_available()</span></code></a></li>
<li><a class="reference internal" href="#scripts.reasoner.Reasoner._choose_destination"><code class="docutils literal notranslate"><span class="pre">Reasoner._choose_destination()</span></code></a></li>
<li><a class="reference internal" href="#scripts.reasoner.Reasoner.execute"><code class="docutils literal notranslate"><span class="pre">Reasoner.execute()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#module-scripts.recharge">Recharge Module</a><ul>
<li><a class="reference internal" href="#scripts.recharge.Recharge"><code class="docutils literal notranslate"><span class="pre">Recharge</span></code></a><ul>
<li><a class="reference internal" href="#scripts.recharge.Recharge._check_rob_pos"><code class="docutils literal notranslate"><span class="pre">Recharge._check_rob_pos()</span></code></a></li>
<li><a class="reference internal" href="#scripts.recharge.Recharge._plan_and_go_to_recharge"><code class="docutils literal notranslate"><span class="pre">Recharge._plan_and_go_to_recharge()</span></code></a></li>
<li><a class="reference internal" href="#scripts.recharge.Recharge._recharging_method"><code class="docutils literal notranslate"><span class="pre">Recharge._recharging_method()</span></code></a></li>
<li><a class="reference internal" href="#scripts.recharge.Recharge.execute"><code class="docutils literal notranslate"><span class="pre">Recharge.execute()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#module-scripts.plan_path_to_location">Plan Path To Location Module</a><ul>
<li><a class="reference internal" href="#scripts.plan_path_to_location.PlanPathToLocation"><code class="docutils literal notranslate"><span class="pre">PlanPathToLocation</span></code></a><ul>
<li><a class="reference internal" href="#scripts.plan_path_to_location.PlanPathToLocation.execute"><code class="docutils literal notranslate"><span class="pre">PlanPathToLocation.execute()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#module-scripts.go_to_location_to_visit">Go To Location To Visit Module</a><ul>
<li><a class="reference internal" href="#scripts.go_to_location_to_visit.GoToLocationToVisit"><code class="docutils literal notranslate"><span class="pre">GoToLocationToVisit</span></code></a><ul>
<li><a class="reference internal" href="#scripts.go_to_location_to_visit.GoToLocationToVisit.execute"><code class="docutils literal notranslate"><span class="pre">GoToLocationToVisit.execute()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#module-scripts.planner">Planner Server Module</a><ul>
<li><a class="reference internal" href="#scripts.planner.PlaningAction"><code class="docutils literal notranslate"><span class="pre">PlaningAction</span></code></a><ul>
<li><a class="reference internal" href="#scripts.planner.PlaningAction.execute_callback"><code class="docutils literal notranslate"><span class="pre">PlaningAction.execute_callback()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#module-scripts.controller">Controller Server Module</a><ul>
<li><a class="reference internal" href="#scripts.controller.ControllingAction"><code class="docutils literal notranslate"><span class="pre">ControllingAction</span></code></a><ul>
<li><a class="reference internal" href="#scripts.controller.ControllingAction.execute_callback"><code class="docutils literal notranslate"><span class="pre">ControllingAction.execute_callback()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">EXPROBLAB_Assignment1</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="#" class="icon icon-home"></a> &raquo;</li>
      <li>Welcome to EXPROBLAB_Assignment1’s documentation!</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/index.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="welcome-to-exproblab-assignment1-s-documentation">
<h1>Welcome to EXPROBLAB_Assignment1’s documentation!<a class="headerlink" href="#welcome-to-exproblab-assignment1-s-documentation" title="Permalink to this heading"></a></h1>
<div class="toctree-wrapper compound">
</div>
</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this heading"></a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
<div class="section" id="exproblab-assignment1">
<h2>EXPROBLAB_Assignment1<a class="headerlink" href="#exproblab-assignment1" title="Permalink to this heading"></a></h2>
<p>This is the documenation for the Experimental Robotics Laboratory Assignment #1</p>
</div>
</div>
<div class="section" id="module-scripts.helper">
<span id="helper-module"></span><h1>Helper Module<a class="headerlink" href="#module-scripts.helper" title="Permalink to this heading"></a></h1>
<span class="target" id="module-helper"></span><p>This class implements an helper member that can be usde in the program it is included into to simplify the use of the code.
In particular this helper provides all the action clients used and needed to control the robot plus other functions used to retrieve informations from the data/queries acquired.</p>
<dl>
<dt>Clients:</dt><dd><p><code class="xref py py-attr docutils literal notranslate"><span class="pre">armor_client</span></code>: client to communicate with the aRMOR server. It provides the possibility to create, load, modify and save an ontology. Moreover, it is used to retireve information about the robot position
and its possibility to reach a particular location.</p>
<p><code class="xref py py-attr docutils literal notranslate"><span class="pre">motion_planner</span></code>: client to communicate with the planner server. This client is used to give the sever a start an a target position and the server provides a plan of points that the robot will have to follow.</p>
<p><code class="xref py py-attr docutils literal notranslate"><span class="pre">motion_controller</span></code>: client to communicate with the controller server. The client is responsible of moving the robot, so it has to give the robot the planner client points and makes it follow them to reach the target position.</p>
</dd>
</dl>
<dl class="py class">
<dt class="sig sig-object py" id="scripts.helper.Helper">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">scripts.helper.</span></span><span class="sig-name descname"><span class="pre">Helper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">done_callback</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feedback_callback</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mutex</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/helper.html#Helper"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.helper.Helper" title="Permalink to this definition"></a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="scripts.helper.Helper._location_old_timestamp">
<span class="sig-name descname"><span class="pre">_location_old_timestamp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">location</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/helper.html#Helper._location_old_timestamp"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.helper.Helper._location_old_timestamp" title="Permalink to this definition"></a></dt>
<dd><p>Function to retrieve the timestamp of the lcoation.
It is used the aRMOR server with a query and the timestamp is returned as output.
The output represents the last time the location was visited by the robot</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>location</strong> (<em>String</em>) – name of the location the timestamp is required for</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>timestamp of the location casted as a string</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>timestamp(String)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scripts.helper.Helper._robot_pos">
<span class="sig-name descname"><span class="pre">_robot_pos</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/helper.html#Helper._robot_pos"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.helper.Helper._robot_pos" title="Permalink to this definition"></a></dt>
<dd><p>Private function that checks and returns the actual robot position thanks to a query to the aRMOR server.
The function returns a type Point with its x and y parameters.
:param none:</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>actual position of the robot casted as a Point with x and y</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>position(Point)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scripts.helper.Helper._robot_timestamp_value">
<span class="sig-name descname"><span class="pre">_robot_timestamp_value</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/helper.html#Helper._robot_timestamp_value"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.helper.Helper._robot_timestamp_value" title="Permalink to this definition"></a></dt>
<dd><p>Function to retrieve the timestamp of the robot.
It is used the aRMOR server with a query and the timestamp is returned as output.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>none</strong> – </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>timestamp of the robot casted as a string</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>timestamp(String)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scripts.helper.Helper._target_coordiantes">
<span class="sig-name descname"><span class="pre">_target_coordiantes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_location</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/helper.html#Helper._target_coordiantes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.helper.Helper._target_coordiantes" title="Permalink to this definition"></a></dt>
<dd><p>Function to retrieve the room coordinates (x and y) from its name.
The function works with the help of the <code class="xref py py-mod docutils literal notranslate"><span class="pre">name_mapper.py</span></code> file that stores both the name and the corresponding coordinates for each location in the ontology.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>_location</strong> (<em>String</em>) – string containing the name of the location</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>actual coordiantes of the location casted as a Point (with x and y)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>coordinates(Point)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scripts.helper.Helper.check_battery">
<span class="sig-name descname"><span class="pre">check_battery</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/helper.html#Helper.check_battery"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.helper.Helper.check_battery" title="Permalink to this definition"></a></dt>
<dd><p>Function to check the threshold to rise the battery low process.
This function checks the difference between the actual time and the last time the battery has been recharged and if it has passed too much time it changes the value of the sahred variable</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>none</strong> – </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>none</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scripts.helper.Helper.format">
<span class="sig-name descname"><span class="pre">format</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">oldlist</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/helper.html#Helper.format"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.helper.Helper.format" title="Permalink to this definition"></a></dt>
<dd><p>Function to format a list of strings.
It cuts each element of oldlist between the strings start and end, returning the formatted list.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>oldlist</strong> (<em>List</em>) – the list that has to be re-written in a better way</p></li>
<li><p><strong>start</strong> (<em>Char</em>) – the start character for the list memebr cut</p></li>
<li><p><strong>end</strong> (<em>Char</em>) – the end characted for the list memebr cut</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the new list with all the elements written in a proper way</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>newList(List)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scripts.helper.Helper.plan_location">
<span class="sig-name descname"><span class="pre">plan_location</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">location</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/helper.html#Helper.plan_location"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.helper.Helper.plan_location" title="Permalink to this definition"></a></dt>
<dd><p>It returns the goal formatted as the start and target position.
It uses some private methods to compute the actual robot pos and the target goal for the robot.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>location</strong> (<em>String</em>) – location to which the robot has to arrive</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the goal composed as two Points (start and target)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>goal(PlanGoal)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scripts.helper.Helper.reason_changes">
<span class="sig-name descname"><span class="pre">reason_changes</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/helper.html#Helper.reason_changes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.helper.Helper.reason_changes" title="Permalink to this definition"></a></dt>
<dd><p>Function to apply the modifications to the ontology.
it uses the aRMOR client to do thi and it is called every time the program changes something related to the ontology entities (timestamps, robot position etc …)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>none</strong> – </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>none</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scripts.helper.Helper.update_timestamp">
<span class="sig-name descname"><span class="pre">update_timestamp</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/helper.html#Helper.update_timestamp"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.helper.Helper.update_timestamp" title="Permalink to this definition"></a></dt>
<dd><p>Function to update the timestamp of an entity in the ontology.
It is replaced the timestamp of the robot with the acutal time.
This timestamp is then used in the replace of the location the robot is in the moment (the actual robot timestamp is now taken from the private method since it has just been updated)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>none</strong> – </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>none</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-scripts.init_state">
<span id="initstate-module"></span><h1>InitState Module<a class="headerlink" href="#module-scripts.init_state" title="Permalink to this heading"></a></h1>
<span class="target" id="module-init_state"></span><p>This class represents the initial state of the state machine. It is the first state the program is into and it is not executed any longer during its entire execution.
It is responsible of instantiating a type helper to use the useful functions there provided. Then it use a private function to start modifying the ontology given as reference.
It adds all the parameters to the locations, doors, so that the reasoner will be able to know which one communicates with; it later sets that all the elements are different so that there cannot be ambiguities.
At the end of this process it is also retrieve the actual time in the execution and it is add among the properties of the entities so that it can be modified later when necessary.
The execution ends with a return that allows the main program to pass to the next state of the finite stat machine.
The steps are computed thanks to the use of the aRMOR client that provides query to the respective server to modify and use the parameters.
The client is taken from the helper object.</p>
<dl class="simple">
<dt>Clients:</dt><dd><p><code class="xref py py-attr docutils literal notranslate"><span class="pre">client</span></code>: aRMOR client used from the helper entity to send request to the respective server</p>
</dd>
</dl>
<dl class="py class">
<dt class="sig sig-object py" id="scripts.init_state.InitState">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">scripts.init_state.</span></span><span class="sig-name descname"><span class="pre">InitState</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">helper</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/init_state.html#InitState"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.init_state.InitState" title="Permalink to this definition"></a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="scripts.init_state.InitState._ontology_initialization">
<span class="sig-name descname"><span class="pre">_ontology_initialization</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/init_state.html#InitState._ontology_initialization"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.init_state.InitState._ontology_initialization" title="Permalink to this definition"></a></dt>
<dd><p>Function used to store all the request to the aRMOR server, through the client, to modifiy the onotlogy.
In particular it uses a pre-built ontology that is stored in the project folder and it modifies it by adding entities and properties.
It add entities, it add them properties, doors and it add the timestamp.
When it ends it returns to the execute function and it changes state.</p>
<p>(There is also the possibility to save the ontology in another .owl file, and this can be done by un-commenting the last line of code)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>none</strong> – </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>none</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scripts.init_state.InitState.execute">
<span class="sig-name descname"><span class="pre">execute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">userdata</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/init_state.html#InitState.execute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.init_state.InitState.execute" title="Permalink to this definition"></a></dt>
<dd><p>Function that is executed every time the machine enters the state.
It is responsible of returning a state transitioning to change the state.
It uses the mutex instantiated in the helper to manage the variable access.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>userdata</strong> – </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>string containing the label of the action performed and used to change state in the machine.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>transition(String)</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-scripts.fsm">
<span id="fsm-module"></span><h1>FSM Module<a class="headerlink" href="#module-scripts.fsm" title="Permalink to this heading"></a></h1>
<span class="target" id="module-fsm"></span><p>This script is used to define the finite state machine. Here it is initialized with all its states and their respective transitions.
For each state it is defined how to behave for each transition so that the machine cannot be stuck or having errors in the change.
At the beginning it is also instantiated a helper entity that will be passed to each state to make it easier in some cases to use functions and shared variables.
However, the main role of the helper is the share of the mutex that is used to access the shared variables without having troubles doing it.
The state machine that has been created is composed mainly of four states: <code class="xref py py-mod docutils literal notranslate"><span class="pre">ìnit_state</span></code>, <a class="reference internal" href="#module-reasoner" title="reasoner: Class for Reason state of the finite state machine (ROS)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">reasoner</span></code></a>, <em>move randomly</em>, which is a sub machine, and <code class="xref py py-mod docutils literal notranslate"><span class="pre">recharge</span></code>.
Of course this states includes many different tasks so the decision of using some sub-machines allows us to have a more modular code and a more reactive program since the execution of the states are not so long.
For this case we divided the machine as follows:</p>
<ul class="simple">
<li><p>initialization phase;</p></li>
<li><p>reason state: responsible of reasoning the changing happened and computing the new location the robot has to visit (according to some statements);</p></li>
<li><p>move random state: divided into <a class="reference internal" href="#module-plan_path_to_location" title="plan_path_to_location: Class for the PlanPathToLocation state of the sub-finite state machine (ROS)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">plan_path_to_location</span></code></a> and <a class="reference internal" href="#module-go_to_location_to_visit" title="go_to_location_to_visit: Class for the GoToLocationToVisit state of the sub-finite state machine (ROS)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">go_to_location_to_visit</span></code></a>.</p></li>
</ul>
<p>The first is responsible of computing a path from the actual robot position to the target position computed by the reasoner;
the second is responsible of moving the robot through the points of the path just computed.</p>
<ul class="simple">
<li><p>recharge state: it is responsible of recharging the robot battery. The robot can be recharged if and only if it is in the correct recharging room so there are some computation to make the robot arrive there before being recharged.</p></li>
</ul>
<dl class="simple">
<dt>Servers:</dt><dd><p><code class="xref py py-attr docutils literal notranslate"><span class="pre">sis</span></code>: this is the name that the variable of the ROS server has in the program. It is necessary for the smach ROS state machine and it is responsible of the execution of each state and their transitions.</p>
</dd>
</dl>
<dl class="py function">
<dt class="sig sig-object py" id="scripts.fsm.main">
<span class="sig-prename descclassname"><span class="pre">scripts.fsm.</span></span><span class="sig-name descname"><span class="pre">main</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/fsm.html#main"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.fsm.main" title="Permalink to this definition"></a></dt>
<dd><p>This function initializes the state machine node, called _smach_finite_state_machine_.
It also create the helper object to make it easier to access variables and use functions.
It is important to note that the SMACH machine needs the definition of all the outcomes needed to pass from one state to another: in this way if the execute of one state returned a transition that is not included, the machine would return an error or would remain stuck because not knowing what to do.
The machine includes also some sub-machines, since we have four main state that can be divided into many others to have a more modular architecture.</p>
</dd></dl>

</div>
<div class="section" id="module-scripts.reasoner">
<span id="reasoner-module"></span><h1>Reasoner Module<a class="headerlink" href="#module-scripts.reasoner" title="Permalink to this heading"></a></h1>
<span class="target" id="module-reasoner"></span><p>This class is used to reason the changes in the program execution.
The changes inclused:</p>
<ul class="simple">
<li><p>robot position in the environment built;</p></li>
<li><p>the choice of the next reachable location the robot will have to reach.</p></li>
</ul>
<p>All these are computed thanks to the use of the Helper object and few private functions.
The important thing the reasoner has to take into account is the hierarchy among the locations that it has to choose, in particular:</p>
<ul class="simple">
<li><p>the robot should stay mainly in the corridors;</p></li>
<li><p>as soon as a room becomes urgent the robot has to visit it, if it is reachable by the robot;</p></li>
<li><p>the robot has to go to recharge itself in the proper recharging room as soon as the battery is low and the robot can reach that specific location.</p></li>
</ul>
<p>For this purpose the recharging room is set as the most urgent among the other as soon as the battery is low so that it has the priority for the robot as soon as it is reachable by it.
The client is taken from the helper object.</p>
<dl class="simple">
<dt>Clients:</dt><dd><p><code class="xref py py-attr docutils literal notranslate"><span class="pre">client</span></code>: aRMOR client to make the query request to the respective server to take the infos from the actual situation of the robot and the location in the environment</p>
</dd>
</dl>
<dl class="py class">
<dt class="sig sig-object py" id="scripts.reasoner.Reasoner">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">scripts.reasoner.</span></span><span class="sig-name descname"><span class="pre">Reasoner</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">helper</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/reasoner.html#Reasoner"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.reasoner.Reasoner" title="Permalink to this definition"></a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="scripts.reasoner.Reasoner._check_accessible_location">
<span class="sig-name descname"><span class="pre">_check_accessible_location</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/reasoner.html#Reasoner._check_accessible_location"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.reasoner.Reasoner._check_accessible_location" title="Permalink to this definition"></a></dt>
<dd><p>Private function that checks for the reachable locations of the robot when it is in a certain location.
Its main functionality is to return the list of reachable location that are needed: in particular it has to follow the hierarchy of the program:</p>
<ul class="simple">
<li><p>urgent location (if any);</p></li>
<li><p>corridors (if there are not any urgent and if there are any corridors reachable);</p></li>
<li><p>general location (if none of the previous returned something)</p></li>
</ul>
<p>The choice is computed randomly among the list that are found and returned.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>none</strong> – </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a list of string representing the amount of reachable location that can visit accordin to the hierarchy.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>location(List)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scripts.reasoner.Reasoner._check_for_corridors">
<span class="sig-name descname"><span class="pre">_check_for_corridors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_reachable_locations</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/reasoner.html#Reasoner._check_for_corridors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.reasoner.Reasoner._check_for_corridors" title="Permalink to this definition"></a></dt>
<dd><p>Private function to check if there are any corridors that can be reached by the robot from the actual position.
The group of all the corridors is taken by a query to the aRMOR server by the client.
However this list includes all the corridors in the ontology so they have to be sorted according to the locations reachable by the robot, which is the parameter passed to the function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>_reachable_locations</strong> (<em>List</em>) – list of all the reachable locations by the robot from its actual position</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of all the reachable corridors by the robot from its actual position</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>_reachable_corridors(List)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scripts.reasoner.Reasoner._check_for_recharging_room">
<span class="sig-name descname"><span class="pre">_check_for_recharging_room</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_reachable_locations</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/reasoner.html#Reasoner._check_for_recharging_room"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.reasoner.Reasoner._check_for_recharging_room" title="Permalink to this definition"></a></dt>
<dd><p>Private function to check the rechability of the recharging room from the actual position of the robot.
The list of all the reachable locations is passed as parameter and the function checks if the recharging room is present or not in the list.
If yes it returns the name of this location.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>_reachable_locations</strong> (<em>List</em>) – list of all the reachable locations by the robot from its actual position</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>name of the recharging room</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>recharging_room(String)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scripts.reasoner.Reasoner._check_for_urgent_locations">
<span class="sig-name descname"><span class="pre">_check_for_urgent_locations</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_reachable_locations</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/reasoner.html#Reasoner._check_for_urgent_locations"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.reasoner.Reasoner._check_for_urgent_locations" title="Permalink to this definition"></a></dt>
<dd><p>Private function to check if there are any urgent locations that can be reached by the robot from the actual position.
The group of all the urgent locations is taken by a query to the aRMOR server by the client.
However this list includes all the locations that are currently urgent in the ontology so they have to be sorted according to the locations reachable by the robot, which is the parameter passed to the function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>_reachable_locations</strong> (<em>List</em>) – list of all the reachable locations by the robot from its actual position</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of all the urgent locations reachable by the robot from its actual position</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>_reachable_urgent(List)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scripts.reasoner.Reasoner._check_recharge_location_available">
<span class="sig-name descname"><span class="pre">_check_recharge_location_available</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/reasoner.html#Reasoner._check_recharge_location_available"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.reasoner.Reasoner._check_recharge_location_available" title="Permalink to this definition"></a></dt>
<dd><p>Private funtion to check if the recharging room is available from the actual robot position.
This is a function used when the battery is low to see if the robot can directly move to the recharging room or has to move to another location before reaching it.
If it can reach then it is returned the name of the location otherwise an empty list.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>none</strong> – </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>name of the recharging room</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>name(String)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scripts.reasoner.Reasoner._choose_destination">
<span class="sig-name descname"><span class="pre">_choose_destination</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_locations</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/reasoner.html#Reasoner._choose_destination"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.reasoner.Reasoner._choose_destination" title="Permalink to this definition"></a></dt>
<dd><p>Private function to choose the actual location the robot has to reach.
The location is chosen randomly from a list of rechable locations passed to the function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>_locations</strong> (<em>List</em>) – list of all the reachable locations by the robot from its actual position</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>name of the location the robot has to reach</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>_choice(String)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scripts.reasoner.Reasoner.execute">
<span class="sig-name descname"><span class="pre">execute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">userdata</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/reasoner.html#Reasoner.execute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.reasoner.Reasoner.execute" title="Permalink to this definition"></a></dt>
<dd><p>Function that is executed every time the machine enters the state.
It is responsible of returning a state transitioning to change the state.
It uses the mutex instantiated in the helper to manage the variable access.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>userdata</strong> – </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>string containing the label of the action performed and used to change state in the machine.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>transition(String)</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-scripts.recharge">
<span id="recharge-module"></span><h1>Recharge Module<a class="headerlink" href="#module-scripts.recharge" title="Permalink to this heading"></a></h1>
<span class="target" id="module-recahrge"></span><p>This class represent the recharging state of the finite state machine. This state is executed every time the battery of the robot is low and the robot is located in the recharging room.
In particular, in the robot is in a location and it can reach the recharging room then the FSM enters in this state, brings the robot to the recharging room and then recharges it.
If the robot is in a location and it cannot reach the recharging room this state is not executed because the robot could not physically enter in the rechargin location.
At the end if the robot is already in the recharging location then the recharging state just recharges the robot and returns an execute action that allows the program know the robot can start again moving randonmly.
The recharging method takes more or less 5 seconds to recharge the robot completely to 100% before let it go away again.
The movement or the robot is performed thanks to the <a class="reference internal" href="#module-planner" title="planner: Class for the Planner server to compute the path (ROS)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">planner</span></code></a> and the <a class="reference internal" href="#module-controller" title="controller: Class for the Controller server to compute the path (ROS)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">controller</span></code></a> through a request to the servers by the clients used.
The location of the robot is checked by a query by the aRMOR client and its respective server.
The clients are taken from the helper object initialized in the state.</p>
<dl class="simple">
<dt>Clients:</dt><dd><p><code class="xref py py-attr docutils literal notranslate"><span class="pre">client</span></code>: aRMOR client used to update the timestamp of the robot and of the location the robot has just visited
<code class="xref py py-attr docutils literal notranslate"><span class="pre">planner_client</span></code>: client from which it is taken the goal, which means the path just computed to be passed to the controller.
<code class="xref py py-attr docutils literal notranslate"><span class="pre">controller_client</span></code>: client that makes the request to the respective server to move the robot through the path from the starting to the end position.</p>
</dd>
</dl>
<dl class="py class">
<dt class="sig sig-object py" id="scripts.recharge.Recharge">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">scripts.recharge.</span></span><span class="sig-name descname"><span class="pre">Recharge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">helper</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/recharge.html#Recharge"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.recharge.Recharge" title="Permalink to this definition"></a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="scripts.recharge.Recharge._check_rob_pos">
<span class="sig-name descname"><span class="pre">_check_rob_pos</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/recharge.html#Recharge._check_rob_pos"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.recharge.Recharge._check_rob_pos" title="Permalink to this definition"></a></dt>
<dd><p>Private function that checks the robot position with a query by the aRMOR client to the respective server.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>none</strong> – </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>actual location of the robot</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>location(String)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scripts.recharge.Recharge._plan_and_go_to_recharge">
<span class="sig-name descname"><span class="pre">_plan_and_go_to_recharge</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/recharge.html#Recharge._plan_and_go_to_recharge"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.recharge.Recharge._plan_and_go_to_recharge" title="Permalink to this definition"></a></dt>
<dd><p>Private function that is used to plan the path to the recharging location and move the robot to that position before recharging it.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>none</strong> – </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>none</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scripts.recharge.Recharge._recharging_method">
<span class="sig-name descname"><span class="pre">_recharging_method</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/recharge.html#Recharge._recharging_method"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.recharge.Recharge._recharging_method" title="Permalink to this definition"></a></dt>
<dd><p>Private function that performs the recharging on the robot if and only if when it is located in the recharging room.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>none</strong> – </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>none</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scripts.recharge.Recharge.execute">
<span class="sig-name descname"><span class="pre">execute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">userdata</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/recharge.html#Recharge.execute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.recharge.Recharge.execute" title="Permalink to this definition"></a></dt>
<dd><p>Function that is executed every time the machine enters the state.
It is responsible of returning a state transitioning to change the state.
It uses the mutex instantiated in the helper to manage the variable access.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>userdata</strong> – </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>string containing the label of the action performed and used to change state in the machine.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>transition(String)</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-scripts.plan_path_to_location">
<span id="plan-path-to-location-module"></span><h1>Plan Path To Location Module<a class="headerlink" href="#module-scripts.plan_path_to_location" title="Permalink to this heading"></a></h1>
<span class="target" id="module-plan_path_to_location"></span><p>This class is a state of the sub-state machine <em>move random</em>. This class has the aim to compute a plan of <em>n</em> points from the actual position of the robot to the target location given by the reasoner.
The number of points is a parameter specified in the <code class="xref py py-mod docutils literal notranslate"><span class="pre">name_mapper.py</span></code> file.
The class call the <code class="xref py py-func docutils literal notranslate"><span class="pre">plan_location()</span></code> function from the helper object, previously initialized, which uses the <a class="reference internal" href="#module-planner" title="planner: Class for the Planner server to compute the path (ROS)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">planner</span></code></a> server to compute the path.
As soon as the server gives to the client the response with the result of the path the the sub-machine passes to the next state.
The client is taken from the helper object.</p>
<dl class="simple">
<dt>Clients:</dt><dd><p><code class="xref py py-attr docutils literal notranslate"><span class="pre">planner_client</span></code>: client that makes the request to the respective server to take the path from the starting to the end position for the robot</p>
</dd>
</dl>
<dl class="py class">
<dt class="sig sig-object py" id="scripts.plan_path_to_location.PlanPathToLocation">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">scripts.plan_path_to_location.</span></span><span class="sig-name descname"><span class="pre">PlanPathToLocation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">helper</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/plan_path_to_location.html#PlanPathToLocation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.plan_path_to_location.PlanPathToLocation" title="Permalink to this definition"></a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="scripts.plan_path_to_location.PlanPathToLocation.execute">
<span class="sig-name descname"><span class="pre">execute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">userdata</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/plan_path_to_location.html#PlanPathToLocation.execute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.plan_path_to_location.PlanPathToLocation.execute" title="Permalink to this definition"></a></dt>
<dd><p>Function that is executed every time the machine enters the state.
It is responsible of returning a state transitioning to change the state.
It uses the mutex instantiated in the helper to manage the variable access.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>userdata</strong> – </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>string containing the label of the action performed and used to change state in the sub machine.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>transition(String)</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-scripts.go_to_location_to_visit">
<span id="go-to-location-to-visit-module"></span><h1>Go To Location To Visit Module<a class="headerlink" href="#module-scripts.go_to_location_to_visit" title="Permalink to this heading"></a></h1>
<span class="target" id="module-go_to_location_to_visit"></span><p>This class is a state of the sub-state machine <em>move randomly</em>. This class has the aim to move the robot through the path computed in the previous state.
The path is taken from the <a class="reference internal" href="#module-planner" title="planner: Class for the Planner server to compute the path (ROS)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">planner</span></code></a> client by taking its result provided by the respsctive server and then it is passed to the <a class="reference internal" href="#module-controller" title="controller: Class for the Controller server to compute the path (ROS)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">controller</span></code></a> ones. This uses the <a class="reference internal" href="#module-controller" title="controller: Class for the Controller server to compute the path (ROS)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">controller</span></code></a> to make the robot move through the points of the path.
This state is a little trivial since it is used both to move the robot from a location to another both to drive it to the recharging room when necessary and when possible.
Due to this as soon as the robot has a location that has to reach, this location is reached and then, depending of the variable shared by the Helper, it can be retrieved if the move was just a random movement or it was needed to reach a location from which the recharging room is reachable.
The clients are taken from the helper object.</p>
<dl>
<dt>Clients:</dt><dd><p><code class="xref py py-attr docutils literal notranslate"><span class="pre">client</span></code>: aRMOR client used to update the timestamp of the robot and of the location the robot has just visited</p>
<p><code class="xref py py-attr docutils literal notranslate"><span class="pre">planner_client</span></code>: client from which it is taken the goal, which means the path just computed to be passed to the controller.</p>
<p><code class="xref py py-attr docutils literal notranslate"><span class="pre">controller_client</span></code>: client that makes the request to the respective server to move the robot through the path from the starting to the end position.</p>
</dd>
</dl>
<dl class="py class">
<dt class="sig sig-object py" id="scripts.go_to_location_to_visit.GoToLocationToVisit">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">scripts.go_to_location_to_visit.</span></span><span class="sig-name descname"><span class="pre">GoToLocationToVisit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">helper</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/go_to_location_to_visit.html#GoToLocationToVisit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.go_to_location_to_visit.GoToLocationToVisit" title="Permalink to this definition"></a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="scripts.go_to_location_to_visit.GoToLocationToVisit.execute">
<span class="sig-name descname"><span class="pre">execute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">userdata</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/go_to_location_to_visit.html#GoToLocationToVisit.execute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.go_to_location_to_visit.GoToLocationToVisit.execute" title="Permalink to this definition"></a></dt>
<dd><p>Function that is executed every time the machine enters the state.
It is responsible of returning a state transitioning to change the state.
It uses the mutex instantiated in the helper to manage the variable access.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>userdata</strong> – </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>string containing the label of the action performed and used to change state in the sub machine and returning to the upper one.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>transition(String)</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-scripts.planner">
<span id="planner-server-module"></span><h1>Planner Server Module<a class="headerlink" href="#module-scripts.planner" title="Permalink to this heading"></a></h1>
<span class="target" id="module-planner"></span><p>This class is the server used by the FSM to compute the path for the robot from a starting position to a target one.
Each position in the environment used is associated to a point coordinate [float x, float y] according to the list in the <code class="xref py py-mod docutils literal notranslate"><span class="pre">name_mapper</span></code> file.
The plan is computed as a linear space on ‘n’ points between the two coordinates (the number of points is set in the same file as before).
The server computes the path and then publish the result. In case the process is interrupted due to some signals (a battery low for example), then it returns nothing because of the preemption.</p>
<dl class="simple">
<dt>Servers:</dt><dd><p><code class="xref py py-attr docutils literal notranslate"><span class="pre">motion/planner</span></code>: server used to plan the path between the two position passed as goal input to the server.</p>
</dd>
</dl>
<dl class="py class">
<dt class="sig sig-object py" id="scripts.planner.PlaningAction">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">scripts.planner.</span></span><span class="sig-name descname"><span class="pre">PlaningAction</span></span><a class="reference internal" href="_modules/scripts/planner.html#PlaningAction"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.planner.PlaningAction" title="Permalink to this definition"></a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="scripts.planner.PlaningAction.execute_callback">
<span class="sig-name descname"><span class="pre">execute_callback</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">goal</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/planner.html#PlaningAction.execute_callback"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.planner.PlaningAction.execute_callback" title="Permalink to this definition"></a></dt>
<dd><p>Function that is executed every time the machine needs to compute a plan from two locations.
The callback invoked when a client set a goal to the <a class="reference internal" href="#module-planner" title="planner: Class for the Planner server to compute the path (ROS)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">planner</span></code></a> server.
This function will return a list of points (the plan) where the fist point is the current robot position (passed as goal.start parameter), while the last point is the <em>target</em> position (passed as <code class="xref py py-attr docutils literal notranslate"><span class="pre">goal.target</span></code> parameter).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>none</strong> – </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>none</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-scripts.controller">
<span id="controller-server-module"></span><h1>Controller Server Module<a class="headerlink" href="#module-scripts.controller" title="Permalink to this heading"></a></h1>
<span class="target" id="module-controller"></span><p>This class is the server used by the FSM to simulate the movement of the robot from a starting position to a target one.
The path to follow is passed by the client. The controller starts as soon as the planner ends computing the path.
The server simulates the movement of the robot and then publish the result. In case the process is interrupted due to some signals (a battery low for example), then it returns nothing because of the preemption.</p>
<dl class="simple">
<dt>Servers:</dt><dd><p><code class="xref py py-attr docutils literal notranslate"><span class="pre">motion/controller</span></code>: server used to simulate the movement of the robot.</p>
</dd>
</dl>
<dl class="py class">
<dt class="sig sig-object py" id="scripts.controller.ControllingAction">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">scripts.controller.</span></span><span class="sig-name descname"><span class="pre">ControllingAction</span></span><a class="reference internal" href="_modules/scripts/controller.html#ControllingAction"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.controller.ControllingAction" title="Permalink to this definition"></a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="scripts.controller.ControllingAction.execute_callback">
<span class="sig-name descname"><span class="pre">execute_callback</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">goal</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/controller.html#ControllingAction.execute_callback"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.controller.ControllingAction.execute_callback" title="Permalink to this definition"></a></dt>
<dd><p>Function that is executed every time the machine needs to simulate the movement of the robot between two locations.
The callback invoked when a client set a goal to the <a class="reference internal" href="#module-controller" title="controller: Class for the Controller server to compute the path (ROS)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">controller</span></code></a> server.
This function requires a list of via points (the plan), and it simulates a movement through each point with a fixed delay.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>none</strong> – </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>none</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Matteo Maragliano.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>