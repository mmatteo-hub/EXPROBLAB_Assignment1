<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Welcome to EXPROBLAB_Assignment1’s documentation! &mdash; EXPROBLAB_Assignment1 1.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="#" class="icon icon-home"> EXPROBLAB_Assignment1
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">Welcome to EXPROBLAB_Assignment1’s documentation!</a></li>
<li><a class="reference internal" href="#indices-and-tables">Indices and tables</a><ul>
<li><a class="reference internal" href="#exproblab-assignment1">EXPROBLAB_Assignment1</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-scripts.helper">Helper Module</a></li>
<li><a class="reference internal" href="#module-scripts.init_state">InitState Module</a><ul>
<li><a class="reference internal" href="#scripts.init_state.InitState"><code class="docutils literal notranslate"><span class="pre">InitState</span></code></a><ul>
<li><a class="reference internal" href="#scripts.init_state.InitState.execute"><code class="docutils literal notranslate"><span class="pre">InitState.execute()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#module-scripts.fsm">FSM Module</a><ul>
<li><a class="reference internal" href="#scripts.fsm.main"><code class="docutils literal notranslate"><span class="pre">main()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-scripts.reasoner">Reasoner Module</a><ul>
<li><a class="reference internal" href="#scripts.reasoner.Reasoner"><code class="docutils literal notranslate"><span class="pre">Reasoner</span></code></a><ul>
<li><a class="reference internal" href="#scripts.reasoner.Reasoner.execute"><code class="docutils literal notranslate"><span class="pre">Reasoner.execute()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#module-scripts.recharge">Recharge Module</a><ul>
<li><a class="reference internal" href="#scripts.recharge.Recharge"><code class="docutils literal notranslate"><span class="pre">Recharge</span></code></a><ul>
<li><a class="reference internal" href="#scripts.recharge.Recharge.execute"><code class="docutils literal notranslate"><span class="pre">Recharge.execute()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#module-scripts.plan_path_to_location">Plan Path To Location Module</a><ul>
<li><a class="reference internal" href="#scripts.plan_path_to_location.PlanPathToLocation"><code class="docutils literal notranslate"><span class="pre">PlanPathToLocation</span></code></a><ul>
<li><a class="reference internal" href="#scripts.plan_path_to_location.PlanPathToLocation.execute"><code class="docutils literal notranslate"><span class="pre">PlanPathToLocation.execute()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#module-scripts.go_to_location_to_visit">Go To Location To Visit Module</a><ul>
<li><a class="reference internal" href="#scripts.go_to_location_to_visit.GoToLocationToVisit"><code class="docutils literal notranslate"><span class="pre">GoToLocationToVisit</span></code></a><ul>
<li><a class="reference internal" href="#scripts.go_to_location_to_visit.GoToLocationToVisit.execute"><code class="docutils literal notranslate"><span class="pre">GoToLocationToVisit.execute()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#module-scripts.planner">Planner Server Module</a></li>
<li><a class="reference internal" href="#module-scripts.controller">Controller Server Module</a></li>
</ul>
</div>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">EXPROBLAB_Assignment1</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="#" class="icon icon-home"></a> &raquo;</li>
      <li>Welcome to EXPROBLAB_Assignment1’s documentation!</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/index.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="welcome-to-exproblab-assignment1-s-documentation">
<h1>Welcome to EXPROBLAB_Assignment1’s documentation!<a class="headerlink" href="#welcome-to-exproblab-assignment1-s-documentation" title="Permalink to this heading"></a></h1>
<div class="toctree-wrapper compound">
</div>
</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this heading"></a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
<div class="section" id="exproblab-assignment1">
<h2>EXPROBLAB_Assignment1<a class="headerlink" href="#exproblab-assignment1" title="Permalink to this heading"></a></h2>
<p>This is the documenation for the Experimental Robotics Laboratory Assignment #1</p>
</div>
</div>
<div class="section" id="module-scripts.helper">
<span id="helper-module"></span><h1>Helper Module<a class="headerlink" href="#module-scripts.helper" title="Permalink to this heading"></a></h1>
<span class="target" id="module-helper"></span><p>This class implements an helper member that can be usde in the program it is included into to simplify the use of the code.
In particular this helper provides all the action clients used and needed to control the robot plus other functions used to retrieve informations from the data/queries acquired.</p>
<dl>
<dt>Clients:</dt><dd><p>armor_client: client to communicate with the aRMOR server. It provides the possibility to create, load, modify and save an ontology. Moreover, it is used to retireve information about the robot position
and its possibility to reach a particular location.</p>
<p>motion_planner: client to communicate with the planner server. This client is used to give the sever a start an a target position and the server provides a plan of points that the robot will have to follow.</p>
<p>motion_controller: client to communicate with the controller server. The client is responsible of moving the robot, so it has to give the robot the planner client points and makes it follow them to reach the target position.</p>
</dd>
</dl>
</div>
<div class="section" id="module-scripts.init_state">
<span id="initstate-module"></span><h1>InitState Module<a class="headerlink" href="#module-scripts.init_state" title="Permalink to this heading"></a></h1>
<span class="target" id="module-init_state"></span><p>This class represents the initial state of the state machine. It is the first state the program is into and it is not executed any longer during its entire execution.
It is responsible of instantiating a type helper to use the useful functions there provided. Then it use a private function to start modifying the ontology given as reference.
It adds all the parameters to the locations, doors, so that the reasoner will be able to know which one communicates with; it later sets that all the elements are different so that there cannot be ambiguities.
At the end of this process it is also retrieve the actual time in the execution and it is add among the properties of the entities so that it can be modified later when necessary.
The execution ends with a return that allows the main program to pass to the next state of the finite stat machine.
The steps are computed thanks to the use of the aRMOR client that provides query to the respective server to modify and use the parameters.
The client is taken from the helper object.</p>
<dl class="simple">
<dt>Clients:</dt><dd><p>client: aRMOR client used from the helper entity to sedn request to the respective server</p>
</dd>
</dl>
<dl class="py class">
<dt class="sig sig-object py" id="scripts.init_state.InitState">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">scripts.init_state.</span></span><span class="sig-name descname"><span class="pre">InitState</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">helper</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/init_state.html#InitState"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.init_state.InitState" title="Permalink to this definition"></a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="scripts.init_state.InitState.execute">
<span class="sig-name descname"><span class="pre">execute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">userdata</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/init_state.html#InitState.execute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.init_state.InitState.execute" title="Permalink to this definition"></a></dt>
<dd><p>Function that is executed every time the machine enters the state.
It is responsible of returning a state transitioning to change the state.
It uses the mutex instantiated in the helper to manage the variable access.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>userdata</strong> – </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>string containing the label of the action performed and used to change state in the machine.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>transition(String)</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-scripts.fsm">
<span id="fsm-module"></span><h1>FSM Module<a class="headerlink" href="#module-scripts.fsm" title="Permalink to this heading"></a></h1>
<span class="target" id="module-fsm"></span><p>This script is used to define the finite state machine. Here it is initialized with all its states and their respective transitions.
For each state it is defined how to behave for each transition so that the machine cannot be stuck or having errors in the change.
At the beginning it is also instantiated a helper entity that will be passed to each state to make it easier in some cases to use functions and shared variables.
However, the main role of the helper is the share of the mutex that is used to access the shared variables without having troubles doing it.
The state machine that has been created is composed mainly of four states: <em>inititalization state</em>, <em>reason state</em>, <em>move random state</em> and <em>recharge</em>.
Of course this states includes many different tasks so the decision of using some sub-machines allows us to have a more modular code and a more reactive program since the execution of the states are not so long.
For this case we divided the machine as follows:
- initialization phase;
- reason state: responsible of reasoning the changing happened and computing the new location the robot has to visit (according to some statements);
- mode random state: divided into <a class="reference internal" href="#module-plan_path_to_location" title="plan_path_to_location: Class for the PlanPathToLocation state of the sub-finite state machine (ROS)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">plan_path_to_location</span></code></a> and <a class="reference internal" href="#module-go_to_location_to_visit" title="go_to_location_to_visit: Class for the GoToLocationToVisit state of the sub-finite state machine (ROS)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">go_to_location_to_visit</span></code></a>.
The first is responsible of computing a path from the actual robot position to the target position computed by the reasoner;
the second is responsible of moving the robot through the points of the path just computed.
- recharge state: it is responsible of recharging the robot battery. The robot can be recharged if and only if it is in the correct recharging room so there are some computation to make the robot arrive there before being recharged.</p>
<dl class="simple">
<dt>Servers:</dt><dd><p>sis: this is the name that the variable of the ROS server has in the program. It is necessary for the smach ROS state machine and it is responsible of the execution of each state and their transitions.</p>
</dd>
</dl>
<dl class="py function">
<dt class="sig sig-object py" id="scripts.fsm.main">
<span class="sig-prename descclassname"><span class="pre">scripts.fsm.</span></span><span class="sig-name descname"><span class="pre">main</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/fsm.html#main"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.fsm.main" title="Permalink to this definition"></a></dt>
<dd><p>This function initializes the state machine node, called ‘smach_finite_state_machine’.
It also create the helper object to make it easier to access variables and use functions.
It is important to note that the SMACH machine needs the definition of all the outcomes needed to pass from one state to another: in this way if the execute of one state returned a transition that is not included, the machine would return an error or would remain stuck because not knowing what to do.
The machine includes also some sub-machines, since we have four main state that can be divided into many others to have a more modular architecture.</p>
</dd></dl>

</div>
<div class="section" id="module-scripts.reasoner">
<span id="reasoner-module"></span><h1>Reasoner Module<a class="headerlink" href="#module-scripts.reasoner" title="Permalink to this heading"></a></h1>
<span class="target" id="module-reasoner"></span><p>This class is used to reason the changes in the program execution.
The changes inclused:
- robot position in the environment built;
- the choice of the next reachable location the robot will have to reach.
All these are computed thanks to the use of the Helper object and few private functions.
The important thing the reasoner has to take into account is the hierarchy among the locations that it has to choose, in particular:
- the robot should stay mainly in the corridors;
- as soon as a room becomes urgent the robot has to visit it, if it is reachable by the robot;
- the robot has to go to recharge itself in the proper recharging room as soon as the battery is low and the robot can reach that specific location.
For this purpose the recharging room is set as the most urgent among the other as soon as the battery is low so that it has the priority for the robot as soon as it is reachable by it.
The client is taken from the helper object.</p>
<dl class="simple">
<dt>Clients:</dt><dd><p>client: aRMOR client to make the query request to the respective server to take the infos from the actual situation of the robot and the location in the environment</p>
</dd>
</dl>
<dl class="py class">
<dt class="sig sig-object py" id="scripts.reasoner.Reasoner">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">scripts.reasoner.</span></span><span class="sig-name descname"><span class="pre">Reasoner</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">helper</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/reasoner.html#Reasoner"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.reasoner.Reasoner" title="Permalink to this definition"></a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="scripts.reasoner.Reasoner.execute">
<span class="sig-name descname"><span class="pre">execute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">userdata</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/reasoner.html#Reasoner.execute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.reasoner.Reasoner.execute" title="Permalink to this definition"></a></dt>
<dd><p>Function that is executed every time the machine enters the state.
It is responsible of returning a state transitioning to change the state.
It uses the mutex instantiated in the helper to manage the variable access.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>userdata</strong> – </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>string containing the label of the action performed and used to change state in the machine.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>transition(String)</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-scripts.recharge">
<span id="recharge-module"></span><h1>Recharge Module<a class="headerlink" href="#module-scripts.recharge" title="Permalink to this heading"></a></h1>
<span class="target" id="module-recahrge"></span><p>This class represent the recharging state of the finite state machine. This state is executed every time the battery of the robot is low and the robot is located in the recharging room.
In particular, in the robot is in a location and it can reach the recharging room then the FSM enters in this state, brings the robot to the recharging room and then recharges it.
If the robot is in a location and it cannot reach the recharging room this state is not executed because the robot could not physically enter in the rechargin location.
At the end if the robot is already in the recharging location then the recharging state just recharges the robot and returns an execute action that allows the program know the robot can start again moving randonmly.
The recharging method takes more or less 5 seconds to recharge the robot completely to 100% before let it go away again.
The movement or the robot is performed thanks to the <a class="reference internal" href="#module-planner" title="planner: Class for the Planner server to compute the path (ROS)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">planner</span></code></a> and the <a class="reference internal" href="#module-controller" title="controller: Class for the Controller server to compute the path (ROS)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">controller</span></code></a> through a request to the servers by the clients used.
The location of the robot is checked by a query by the aRMOR client and its respective server.
The clients are taken from the helper object initialized in the state.</p>
<dl class="simple">
<dt>Clients:</dt><dd><p>client: aRMOR client used to update the timestamp of the robot and of the location the robot has just visited
planner_client: client from which it is taken the goal, which means the path just computed to be passed to the controller.
controller_client: client that makes the request to the respective server to move the robot through the path from the starting to the end position.</p>
</dd>
</dl>
<dl class="py class">
<dt class="sig sig-object py" id="scripts.recharge.Recharge">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">scripts.recharge.</span></span><span class="sig-name descname"><span class="pre">Recharge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">helper</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/recharge.html#Recharge"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.recharge.Recharge" title="Permalink to this definition"></a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="scripts.recharge.Recharge.execute">
<span class="sig-name descname"><span class="pre">execute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">userdata</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/recharge.html#Recharge.execute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.recharge.Recharge.execute" title="Permalink to this definition"></a></dt>
<dd><p>Function that is executed every time the machine enters the state.
It is responsible of returning a state transitioning to change the state.
It uses the mutex instantiated in the helper to manage the variable access.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>userdata</strong> – </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>string containing the label of the action performed and used to change state in the machine.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>transition(String)</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-scripts.plan_path_to_location">
<span id="plan-path-to-location-module"></span><h1>Plan Path To Location Module<a class="headerlink" href="#module-scripts.plan_path_to_location" title="Permalink to this heading"></a></h1>
<span class="target" id="module-plan_path_to_location"></span><p>This class is a state of the sub-state machine <em>move random</em>. This class has the aim to compute a plan of <em>n</em> points from the actual position of the robot to the target location given by the reasoner.
The number of points is a parameter specified in the <code class="xref py py-mod docutils literal notranslate"><span class="pre">name_mapper</span></code> file.
The class call the <em>plan_location</em> function from the helper object, previously initialized, which uses the <a class="reference internal" href="#module-planner" title="planner: Class for the Planner server to compute the path (ROS)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">planner</span></code></a> server to compute the path.
As soon as the server gives to the client the response with the result of the path the the sub-machine passes to the next state.
The client is taken from the helper object.</p>
<dl class="simple">
<dt>Clients:</dt><dd><p>planner_client: client that makes the request to the respective server to take the path from the starting to the end position for the robot</p>
</dd>
</dl>
<dl class="py class">
<dt class="sig sig-object py" id="scripts.plan_path_to_location.PlanPathToLocation">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">scripts.plan_path_to_location.</span></span><span class="sig-name descname"><span class="pre">PlanPathToLocation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">helper</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/plan_path_to_location.html#PlanPathToLocation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.plan_path_to_location.PlanPathToLocation" title="Permalink to this definition"></a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="scripts.plan_path_to_location.PlanPathToLocation.execute">
<span class="sig-name descname"><span class="pre">execute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">userdata</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/plan_path_to_location.html#PlanPathToLocation.execute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.plan_path_to_location.PlanPathToLocation.execute" title="Permalink to this definition"></a></dt>
<dd><p>Function that is executed every time the machine enters the state.
It is responsible of returning a state transitioning to change the state.
It uses the mutex instantiated in the helper to manage the variable access.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>userdata</strong> – </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>string containing the label of the action performed and used to change state in the sub machine.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>transition(String)</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-scripts.go_to_location_to_visit">
<span id="go-to-location-to-visit-module"></span><h1>Go To Location To Visit Module<a class="headerlink" href="#module-scripts.go_to_location_to_visit" title="Permalink to this heading"></a></h1>
<span class="target" id="module-go_to_location_to_visit"></span><p>This class is a state of the sub-state machine <em>move random</em>. This class has the aim to move the robot through the path computed in the previous state.
The path is taken from the planner client by taking its result and then it is passed to the controller one. This uses the <a class="reference internal" href="#module-controller" title="controller: Class for the Controller server to compute the path (ROS)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">controller</span></code></a> to make the robot move through the points of the path.
This state is a little trivial since it is used both to move the robot from a location to another both to drive it to the recharging room when necessary and when possible.
Due to this as soon as the robot has a location that has to reach, this location is reached and then, depending of the variable shared by the Helper, it can be retrieved if the move was just a random movement or it was needed to reach a location from which the recharging room is reachable.
The clients are taken from the helper object.</p>
<dl class="simple">
<dt>Clients:</dt><dd><p>client: aRMOR client used to update the timestamp of the robot and of the location the robot has just visited
planner_client: client from which it is taken the goal, which means the path just computed to be passed to the controller.
controller_client: client that makes the request to the respective server to move the robot through the path from the starting to the end position.</p>
</dd>
</dl>
<dl class="py class">
<dt class="sig sig-object py" id="scripts.go_to_location_to_visit.GoToLocationToVisit">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">scripts.go_to_location_to_visit.</span></span><span class="sig-name descname"><span class="pre">GoToLocationToVisit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">helper</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/go_to_location_to_visit.html#GoToLocationToVisit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.go_to_location_to_visit.GoToLocationToVisit" title="Permalink to this definition"></a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="scripts.go_to_location_to_visit.GoToLocationToVisit.execute">
<span class="sig-name descname"><span class="pre">execute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">userdata</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/go_to_location_to_visit.html#GoToLocationToVisit.execute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.go_to_location_to_visit.GoToLocationToVisit.execute" title="Permalink to this definition"></a></dt>
<dd><p>Function that is executed every time the machine enters the state.
It is responsible of returning a state transitioning to change the state.
It uses the mutex instantiated in the helper to manage the variable access.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>userdata</strong> – </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>string containing the label of the action performed and used to change state in the sub machine and returning to the upper one.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>transition(String)</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-scripts.planner">
<span id="planner-server-module"></span><h1>Planner Server Module<a class="headerlink" href="#module-scripts.planner" title="Permalink to this heading"></a></h1>
<span class="target" id="module-planner"></span><p>This class is the server used by the FSM to compute the path for the robot from a starting position to a target one.
Each position in the environment used is associated to a point coordinate [float x, float y] according to the list in the <code class="xref py py-mod docutils literal notranslate"><span class="pre">name_mapper</span></code> file.
The plan is computed as a linear space on ‘n’ points between the two coordinates (the number of points is set in the same file as before).
The server computes the path and then publish the result. In case the process is interrupted due to some signals (a battery low for example), then it returns nothing because of the preemption.</p>
<dl class="simple">
<dt>Servers:</dt><dd><p>motion/planner: server used to plan the path between the two position passed as goal input to the server.</p>
</dd>
</dl>
</div>
<div class="section" id="module-scripts.controller">
<span id="controller-server-module"></span><h1>Controller Server Module<a class="headerlink" href="#module-scripts.controller" title="Permalink to this heading"></a></h1>
<span class="target" id="module-controller"></span><p>This class is the server used by the FSM to simulate the movement of the robot from a starting position to a target one.
The path to follow is passed by the client. The controller starts as soon as the planner ends computing the path.
The server simulates the movement of the robot and then publish the result. In case the process is interrupted due to some signals (a battery low for example), then it returns nothing because of the preemption.</p>
<dl class="simple">
<dt>Servers:</dt><dd><p>motion/controller: server used to simulate the movement of the robot.</p>
</dd>
</dl>
</div>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Matteo Maragliano.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>